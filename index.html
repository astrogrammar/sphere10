<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="favicon_io/favicon.ico">
  <link rel="stylesheet" href="./css/ui.css">
  <link rel="stylesheet" href="./css/chart.css">
  <title>Sphere10 Celestial Astrolabe v3.0</title>
  <!-- Sphere10 Celestial Astrolabe is an interactive digital instrument that preserves the geometry of the celestial sphere and allows astronomical and astrological questions to be explored through time, location, and perspective.
   -->
  <style>
    /* Âü∫Êú¨ÁöÑ„Å™„Éö„Éº„Ç∏„É¨„Ç§„Ç¢„Ç¶„ÉàÔºàÂ§©‰ΩìË°®Á§∫ÈÉ®ÂàÜ„ÅÆ„ÅøÔºâ */
    a:link,
    a:visited {
      color: #fff;
      text-decoration-color: white;
    }

    body {
      background: #333;
      margin: 0;
      overflow: hidden;
      color: #ccc;
      font-family: sans-serif;
      margin: 20px 0;
    }

    canvas {
      display: block;
      margin: 0 auto;
      background: #000;
    }

    footer {
      display: block;
      width: 600px;
      font-size: 9pt;
      margin: 20px auto;
      text-align: center;
    }
  </style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZR8BCNMELX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-ZR8BCNMELX');
</script>
<!-- Google tag (gtag.js) -->

<body>
  <div class="controls">
    <!-- Êìç‰Ωú„Éë„Éç„É´„Éò„ÉÉ„ÉÄ„Éº: „Çø„Ç§„Éà„É´ÔºãÊúÄÂ∞èÂåñ„Éú„Çø„É≥ -->
    <div class="control-header">
      <button id="togglePanelButton">‚àí</button>
    </div>
    <div class="controls-content">



      <!-- Ë¶≥Ê∏¨Âú∞ÂÖ•Âäõ„Çª„ÇØ„Ç∑„Éß„É≥ÔºàÁµ±ÂêàÁâàÔºâ -->

      <!-- ÂõûËª¢„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="section">
        <h3 class="section-header" data-section="rotation">
          <span><span class="lang-en">ORIENTATION</span><span class="lang-ja">ÂõûËª¢</span></span>
          <span class="toggle-icon">‚ñº</span>
        </h3>
        <div class="section-content" id="rotation-content">
          <!-- „Çπ„É©„Ç§„ÉÄ„Éº„ÅØÊÆã„Åó„Å§„Å§„ÄÅ„Éû„Ç¶„Çπ„Éâ„É©„ÉÉ„Ç∞„ÅßÊìç‰ΩúÂèØËÉΩ„Å´„Åó„Åæ„Åô -->
          <label><span class="lang-en">Azimuth</span><span class="lang-ja">Ê∞¥Âπ≥</span>
            <input type="range" id="rotationZSlider" min="-180" max="180" value="0">
            <span id="rotationZVal" contenteditable="true" spellcheck="false">0¬∞</span>
          </label>
          <label><span class="lang-en">Altitude</span><span class="lang-ja">ÂçóÂåó</span>
            <input type="range" id="rotationYSlider" min="-90" max="90" value="0">
            <span id="rotationYVal" contenteditable="true" spellcheck="false">0¬∞</span>
          </label>
          <label id="EastWest"><span class="lang-en">Roll</span><span class="lang-ja">Êù±Ë•ø</span>
            <input type="range" id="rotationEWSlider" min="-90" max="90" value="0">
            <span id="rotationEWVal" contenteditable="true" spellcheck="false">0¬∞</span>
          </label>
        </div>
      </div>

      <!-- ÊåáÊ®ô„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="section">
        <h3 class="section-header" data-section="indicator">
          <span><span class="lang-en">REFERENCE LINES</span><span class="lang-ja">ÊåáÊ®ô</span></span>
          <span class="toggle-icon">‚ñº</span>
        </h3>
        <div class="section-content" id="indicator-content">
          <!-- ‚òÖ‚òÖ‚òÖ „Åì„Åì„Åã„ÇâËøΩÂä†„Åó„ÅüË°®Á§∫Á≥ª„Éà„Ç∞„É´ ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="horizonToggle" checked>
            <span class="lang-en">Horizon</span><span class="lang-ja">Âú∞Âπ≥Á∑ö</span>
          </label>
          <label>
            <input type="checkbox" id="meridianToggle" checked>
            <span class="lang-en">Meridian</span><span class="lang-ja">Â≠êÂçàÁ∑ö</span>
          </label>
          <label>
            <input type="checkbox" id="primeVerticalToggle">
            <span class="lang-en">Prime Vertical</span><span class="lang-ja">ÂçØÈÖâÁ∑ö</span>
          </label>
          <label>
            <input type="checkbox" id="equatorToggle" checked>
            <span class="lang-en">Equator</span><span class="lang-ja">Ëµ§ÈÅì</span>
          </label>
          <label>
            <input type="checkbox" id="eclipticToggle" checked>
            <span class="lang-en">Ecliptic</span><span class="lang-ja">ÈªÑÈÅì</span>
          </label>
          <label>
            <input type="checkbox" id="eclipticBandToggle" checked>
            <span class="lang-en">Zodiacal Band</span><span class="lang-ja">Áç£Â∏Ø</span>
          </label>
          <label>
            <input type="checkbox" id="lunarOrbitToggle">
            <span class="lang-en">Lunar Orbit</span><span class="lang-ja">ÁôΩÈÅì</span>
          </label>
          <label>
            <input type="checkbox" id="ra12LinesToggle">
            <span class="lang-en">R.A.</span><span class="lang-ja">Ëµ§Áµå</span>
          </label>
          <label>
            <input type="checkbox" id="declinationLinesToggle">
            <span class="lang-en">Decl.</span><span class="lang-ja">Ëµ§Á∑Ø</span>
          </label>
          <label>
            <input type="checkbox" id="altGridToggle">
            <span class="lang-en">Alt. Grid</span><span class="lang-ja">È´òÂ∫¶</span>
          </label>
          <label>
            <input type="checkbox" id="zenithNadirToggle" aria-label="Toggle Zenith/Nadir markers">
            <span class="lang-en">Zenith/Nadir</span><span class="lang-ja">Â§©È†Ç„ÉªÂ§©Â∫ï</span>
          </label>
          <!-- ‚òÖ‚òÖ‚òÖ ËøΩÂä†ÈÉ®ÂàÜ„Åì„Åì„Åæ„Åß ‚òÖ‚òÖ‚òÖ -->
        </div>
      </div>

      <!-- „Éè„Ç¶„Çπ„Ç∑„Çπ„ÉÜ„É†„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="section">
        <h3 class="section-header" data-section="houses">
          <span><span class="lang-en">HOUSE SYSTEM</span><span class="lang-ja">„Éè„Ç¶„Çπ</span></span>
          <span class="toggle-icon">‚ñº</span>
        </h3>
        <div class="section-content" id="houses-content">
          <div style="padding: 0 20px 12px 20px; display: flex; flex-direction: column; gap: 8px;">
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="none" checked style="width: auto; margin-right: 8px;">
              <span class="lang-en">None</span><span class="lang-ja">Ë°®Á§∫„Å™„Åó</span>
            </label>
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="whole-sign" style="width: auto; margin-right: 8px;">
              <span class="lang-en">Whole Sign</span><span class="lang-ja">„Éõ„Éº„É´„Çµ„Ç§„É≥</span>
            </label>
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="regiomontanus" style="width: auto; margin-right: 8px;">
              <span class="lang-en">Regiomontanus</span><span class="lang-ja">„É¨„Ç∏„Ç™„É¢„É≥„Çø„Éä„Çπ</span>
            </label>
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="campanus" style="width: auto; margin-right: 8px;">
              <span class="lang-en">Campanus</span><span class="lang-ja">„Ç´„É≥„Éë„Éå„Çπ</span>
            </label>
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="equal" style="width: auto; margin-right: 8px;">
              <span class="lang-en">Equal (AC)</span><span class="lang-ja">Á≠âÂàÜ„Éè„Ç¶„Çπ (ACÂü∫Ê∫ñ)</span>
            </label>
            <label style="margin: 0; display: flex; align-items: center;">
              <input type="radio" name="houseSystem" value="placidus" style="width: auto; margin-right: 8px;">
              <span class="lang-en">Placidus</span><span class="lang-ja">„Éó„É©„Ç∑„ÉÄ„Çπ (ÊôÇÈñìÂàÜÂâ≤)</span>
            </label>            
          </div>
        </div>
      </div>

      <!-- Ë£úÂä©„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="section">
        <h3 class="section-header" data-section="option">
          <span><span class="lang-en">DISPLAY SETTINGS</span><span class="lang-ja">Ë£úÂä©</span></span>
          <span class="toggle-icon">‚ñº</span>
        </h3>
        <div class="section-content" id="option-content">
          <!-- ‚òÖ‚òÖ‚òÖ Êó¢Â≠ò„ÅÆË°®Á§∫Á≥ª„Éà„Ç∞„É´ ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="starToggle" checked>
            <span class="lang-en">Fixed Stars</span><span class="lang-ja">ÊÅíÊòü</span>
          </label>
          <!-- ‚òÖ‚òÖ‚òÖ ÊÅíÊòüÂêçË°®Á§∫„Éà„Ç∞„É´ ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="starNamesToggle">
            <span class="lang-en">Star Names</span><span class="lang-ja">ÊòüÂêç</span>
          </label>
          <label>
            <input type="checkbox" id="backToggle">
            <span class="lang-en">Sky Transparency</span><span class="lang-ja">ÈÄèÊòé</span>
          </label>
          <!-- ‚òÖ‚òÖ‚òÖ ÊÉëÊòü„É©„Éô„É´„ÅÆ„Éà„Ç∞„É´„ÇíËøΩÂä† ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="planetLabelToggle">
            <span class="lang-en">Planet Labels</span><span class="lang-ja">ÊÉëÊòüÂêç</span>
          </label>
          <!-- ‚òÖ‚òÖ‚òÖ Êñ∞Ë¶èËøΩÂä†: Êù±Ë•øÂèçËª¢„Éà„Ç∞„É´ ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="reverseEWToggle">
            <span class="lang-en">Invert E-W (Mirror)</span><span class="lang-ja">ÂèçËª¢ ‚óÄ|‚ñ∂</span>
          </label>
          <!-- ‚òÖ‚òÖ‚òÖ ÊñπËßíË°®Á§∫Ë®≠ÂÆö ‚òÖ‚òÖ‚òÖ -->
          <label>
            <input type="checkbox" id="directionToggle" checked>
            <span class="lang-en">Direction</span><span class="lang-ja">ÊñπËßí</span>
          </label>
          <div style="display:none">
            <label><span class="lang-en">Text Size</span><span class="lang-ja">ÊñáÂ≠ó„Çµ„Ç§„Ç∫</span>
              <input type="range" id="directionTextSize" min="10" max="60" value="30">
              <span id="directionTextSizeVal">16px</span>
            </label>
            <label><span class="lang-en">Text Color</span><span class="lang-ja">ÊñáÂ≠óËâ≤</span>
              <input type="color" id="directionTextColor" value="#ff0000">
            </label>
          </div>
        </div>
      </div>

      <!-- Ë¶≥Ê∏¨Âú∞Ë®≠ÂÆö„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="section">
        <h3 class="section-header" data-section="location">
          <span><span class="lang-en">LOCATION</span><span class="lang-ja">Ë¶≥Ê∏¨Âú∞</span></span>
          <span class="toggle-icon">‚ñº</span>
        </h3>
        <div class="section-content" id="location-content">
          <div id="locationSection">
            <!-- Âú∞ÂêçÊ§úÁ¥¢ -->
            <label for="placeInput" style="display:none">Place</label>
            <input type="text" id="placeInput" placeholder="Place Search (e.g., Tokyo)">
            <button id="searchPlaceButton"><span class="lang-en">Search</span><span class="lang-ja">Ê§úÁ¥¢</span></button>

            <!-- Â∫ßÊ®ôÂÖ•Âäõ -->
            <label for="latitudeInput">
              Latitude
              <input type="number" id="latitudeInput" min="-90" max="90" step="0.0001" value="35.4437">
            </label>

            <label for="longitudeInput">
              Longitude
              <input type="number" id="longitudeInput" min="-180" max="180" step="0.0001" value="139.6380">
            </label>

            <!-- ‰øùÂ≠ò„Åï„Çå„ÅüÂ†¥ÊâÄ„É™„Çπ„Éà -->
            <div id="savedLocations">
              <label style="font-size: 0.9em; color: #aaa; margin-bottom:4px; display:block;">Saved Locations:</label>
              <div id="savedLocationsList" style="display: flex; flex-wrap: wrap; gap: 5px;"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="contact">
        <a href="https://forms.gle/gUFJBuh3cxngWHYo6" target="_blank">
          contact
        </a><br>
        astrogrammar.com

        <div class="lang-switcher">
          <button id="langBtnEn" class="lang-btn active" title="English">üá¨üáß</button>
          <button id="langBtnJa" class="lang-btn" title="Japanese">üáØüáµ</button>
        </div>
      </div>
    </div>
  </div>

  <canvas id="sky"></canvas>
  <canvas id="chartCanvas"></canvas>

  <!-- Right Bottom Dock -->
  <div id="bottomRightDock">
    <button id="btnCapture" title="Capture Screenshot">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
        <circle cx="12" cy="13" r="4"></circle>
      </svg>
    </button>
    <button id="toggleTimePanel" title="Time Control">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <polyline points="12 6 12 12 16 14"></polyline>
      </svg>
    </button>
    <button id="toggleZodiacBtn" title="Toggle Stars">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <polygon
          points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
        </polygon>
      </svg>
    </button>
    <button id="togglePlanetsBtn" title="Toggle Horoscope Chart">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="2" y1="12" x2="22" y2="12"></line>
        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
      </svg>
    </button>
  </div>

  <!-- Modern Time Control Panel -->
  <div id="timePanel" class="draggable-panel" style="display:flex;">
    <div id="timePanelHeader" class="panel-header">
      <span class="header-title" style="display: flex; align-items: center;">
        <svg class="panel-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round"
          style="width: 18px; height: 18px; margin-right: 8px; color: #60a5fa;">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span class="lang-en">Time Control</span>
        <span class="lang-ja">Êó•ÊôÇ</span>
      </span>
      <button id="closeTimePanel" class="close-btn" title="Close">√ó</button>
    </div>
    <div class="panel-content">
      <div class="time-display-row">
        <div class="digital-group date-group">
          <input type="number" id="valYear" class="time-part year" placeholder="YYYY">
          <span class="sep">/</span>
          <input type="number" id="valMonth" class="time-part month" placeholder="MM" min="1" max="12">
          <span class="sep">/</span>
          <input type="number" id="valDay" class="time-part day" placeholder="DD" min="1" max="31">
        </div>
        <div class="digital-group time-group">
          <input type="number" id="valHour" class="time-part hour" placeholder="HH" min="0" max="23">
          <span class="sep">:</span>
          <input type="number" id="valMinute" class="time-part minute" placeholder="MM" min="0" max="59">
        </div>
      </div>
      <div class="vcr-controls">
        <button id="tpRewindFast" class="vcr-btn">‚óÄ‚óÄ</button>
        <button id="tpRewind" class="vcr-btn">- ‚óÄ</button>
        <button id="tpPlayPause" class="vcr-btn">‚ñ∂</button>
        <button id="tpForward" class="vcr-btn">‚ñ∂ +</button>
        <button id="tpForwardFast" class="vcr-btn">‚ñ∂‚ñ∂</button>
        <button id="tpToday" class="vcr-btn small"><span class="lang-en">NOW</span><span
            class="lang-ja">ÁèæÂú®</span></button>
      </div>
      <div class="unit-settings-wrapper">
        <button id="toggleUnitSettings" class="icon-btn" title="Change Unit/Speed">
          ‚öôÔ∏è <span class="lang-en">Unit:</span><span class="lang-ja">Âçò‰Ωç:</span> <span id="currentUnitDisplay"><span
              class="lang-en">Minute</span><span class="lang-ja">ÂàÜ</span></span>
        </button>
        <div id="unitSelectorPopup" class="unit-popup hidden">
          <div class="unit-option selected" data-unit="minute"><span class="lang-en">Minute</span><span
              class="lang-ja">ÂàÜ</span></div>
          <div class="unit-option" data-unit="hour"><span class="lang-en">Hour</span><span class="lang-ja">ÊôÇ</span>
          </div>
          <div class="unit-option" data-unit="day"><span class="lang-en">Day</span><span class="lang-ja">Êó•</span></div>
          <div class="unit-option" data-unit="month"><span class="lang-en">Month</span><span class="lang-ja">Êúà</span>
          </div>
          <div class="unit-option" data-unit="year"><span class="lang-en">Year</span><span class="lang-ja">Âπ¥</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="./scripts/store.js"></script>
  <script src="./scripts/astronomy.browser.min.js"></script>
  <script src="./scripts/precession.js"></script>
  <script src="./scripts/utilities.js"></script>
  <script src="./scripts/sphere10.js"></script>
  <script src="./scripts/house.js"></script>
  <script src="./scripts/starNames.js"></script>
  <script src="./scripts/lunarOrbit.js"></script>
  <script src="./scripts/chart.js"></script>
  <script src="./scripts/timeControl.js"></script>
  <div></div>
  <div id="secretHUD" class="hud-container hidden">
    <div class="hud-header">
      <span class="hud-title">ASTROMETRY DATA [LIVE]</span>
      <span class="hud-info">LAT: <span id="hudLat">--</span> LON: <span id="hudLon">--</span></span>
    </div>
    <table class="hud-table">
      <thead>
        <tr>
          <th class="col-body">BODY</th>
          <th class="col-ecl" colspan="2">ECLIPTIC (ÈªÑÈÅì)</th>
          <th class="col-eq" colspan="2">EQUATORIAL (Ëµ§ÈÅì)</th>
          <th class="col-hor" colspan="2">HORIZONTAL (Âú∞Âπ≥)</th>
        </tr>
        <tr class="sub-header">
          <th></th>
          <th>Œª (Lon)</th>
          <th>Œ≤ (Lat)</th>
          <th>Œ± (R.A.)</th>
          <th>Œ¥ (Decl)</th>
          <th>Alt</th>
          <th>Az</th>
        </tr>
      </thead>
      <tbody id="hudBody">
      </tbody>
    </table>
  </div>
  <footer>astrogrammar.com</footer>
</body>

</html>
<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="favicon_io/favicon.ico">
  <link rel="stylesheet" href="./css/ui.css">
  <link rel="stylesheet" href="./css/chart.css">
  <title>Sphere10 ç«‹ä½“å¤©çƒãƒ›ãƒ­ã‚¹ã‚³ãƒ¼ãƒ— v3.0</title>
  <style>
    /* åŸºæœ¬çš„ãªãƒšãƒ¼ã‚¸ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆå¤©ä½“è¡¨ç¤ºéƒ¨åˆ†ã®ã¿ï¼‰ */
    a:link,
    a:visited {
      color: #fff;
      text-decoration-color: white;
    }

    body {
      background: #333;
      margin: 0;
      overflow: hidden;
      color: #ccc;
      font-family: sans-serif;
      margin: 20px 0;
    }

    canvas {
      display: block;
      margin: 0 auto;
      background: #000;
    }

    footer {
      display: block;
      width: 600px;
      font-size: 9pt;
      margin: 20px auto;
      text-align: center;
    }
  </style>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZR8BCNMELX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());
  gtag('config', 'G-ZR8BCNMELX');
</script>
<!-- Google tag (gtag.js) -->

<body>
  <div class="controls">
    <!-- æ“ä½œãƒ‘ãƒãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼: ã‚¿ã‚¤ãƒˆãƒ«ï¼‹æœ€å°åŒ–ãƒœã‚¿ãƒ³ -->
    <div class="control-header">
      <button id="togglePanelButton">âˆ’</button>
    </div>
    <div class="controls-content">



      <!-- è¦³æ¸¬åœ°å…¥åŠ›ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆçµ±åˆç‰ˆï¼‰ -->

      <!-- å›è»¢ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h3 class="section-header" data-section="rotation">
          <span>å›è»¢ ROTATION</span>
          <span class="toggle-icon">â–¼</span>
        </h3>
        <div class="section-content" id="rotation-content">
          <!-- ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã¯æ®‹ã—ã¤ã¤ã€ãƒã‚¦ã‚¹ãƒ‰ãƒ©ãƒƒã‚°ã§æ“ä½œå¯èƒ½ã«ã—ã¾ã™ -->
          <label>æ°´å¹³ Horizontal
            <input type="range" id="rotationZSlider" min="-180" max="180" value="0">
            <span id="rotationZVal">0Â°</span>
          </label>
          <label>å—åŒ— North/South
            <input type="range" id="rotationYSlider" min="-90" max="90" value="0">
            <span id="rotationYVal">0Â°</span>
          </label>
          <label id="EastWest">æ±è¥¿ East/West
            <input type="range" id="rotationEWSlider" min="-90" max="90" value="0">
            <span id="rotationEWVal">0Â°</span>
          </label>
        </div>
      </div>

      <!-- æŒ‡æ¨™ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h3 class="section-header" data-section="indicator">
          <span>æŒ‡æ¨™ INDICATOR</span>
          <span class="toggle-icon">â–¼</span>
        </h3>
        <div class="section-content" id="indicator-content">
          <!-- â˜…â˜…â˜… ã“ã“ã‹ã‚‰è¿½åŠ ã—ãŸè¡¨ç¤ºç³»ãƒˆã‚°ãƒ« â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="horizonToggle" checked>
            åœ°å¹³ç·š Horizon
          </label>
          <label>
            <input type="checkbox" id="meridianToggle" checked>
            å­åˆç·š Meridian
          </label>
          <label>
            <input type="checkbox" id="primeVerticalToggle" checked>
            å¯é…‰ç·š Prime Vertical
          </label>
          <label>
            <input type="checkbox" id="equatorToggle" checked>
            èµ¤é“ Equator
          </label>
          <label>
            <input type="checkbox" id="eclipticToggle" checked>
            é»„é“ Ecliptic
          </label>
          <label>
            <input type="checkbox" id="eclipticBandToggle" checked>
            ç£å¸¯ Zodiac
          </label>
          <label>
            <input type="checkbox" id="lunarOrbitToggle">
            ç™½é“ Lunar Orbit
          </label>
          <label>
            <input type="checkbox" id="ra12LinesToggle" checked>
            èµ¤çµŒ RA
          </label>
          <label>
            <input type="checkbox" id="declinationLinesToggle" checked>
            èµ¤ç·¯ DEC
          </label>
          <label>
            <input type="checkbox" id="altGridToggle" checked>
            é«˜åº¦ Altitude
          </label>
          <label>
            <input type="checkbox" id="zenithNadirToggle" checked aria-label="Toggle Zenith/Nadir markers">
            å¤©é ‚ Zenith/Nadir
          </label>
          <!-- â˜…â˜…â˜… è¿½åŠ éƒ¨åˆ†ã“ã“ã¾ã§ â˜…â˜…â˜… -->
        </div>
      </div>

      <!-- è£œåŠ©ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h3 class="section-header" data-section="option">
          <span>è£œåŠ© OPTION</span>
          <span class="toggle-icon">â–¼</span>
        </h3>
        <div class="section-content" id="option-content">
          <!-- â˜…â˜…â˜… æ—¢å­˜ã®è¡¨ç¤ºç³»ãƒˆã‚°ãƒ« â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="starToggle" checked>
            æ’æ˜Ÿ Fixed Stars
          </label>
          <!-- â˜…â˜…â˜… æ’æ˜Ÿåè¡¨ç¤ºãƒˆã‚°ãƒ« â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="starNamesToggle">
            æ˜Ÿå Star Names
          </label>
          <label>
            <input type="checkbox" id="backToggle">
            é€æ˜ Transparent
          </label>
          <!-- â˜…â˜…â˜… æƒ‘æ˜Ÿãƒ©ãƒ™ãƒ«ã®ãƒˆã‚°ãƒ«ã‚’è¿½åŠ  â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="planetLabelToggle">
            æƒ‘æ˜Ÿ Planet Labels
          </label>
          <!-- â˜…â˜…â˜… æ–°è¦è¿½åŠ : æ±è¥¿åè»¢ãƒˆã‚°ãƒ« â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="reverseEWToggle">
            åè»¢ Flip â—€|â–¶
          </label>
          <!-- â˜…â˜…â˜… æ–¹è§’è¡¨ç¤ºè¨­å®š â˜…â˜…â˜… -->
          <label>
            <input type="checkbox" id="directionToggle" checked>
            æ–¹è§’ Direction
          </label>
          <div style="display:none">
            <label>æ–‡å­—ã‚µã‚¤ã‚º
              <input type="range" id="directionTextSize" min="10" max="60" value="30">
              <span id="directionTextSizeVal">16px</span>
            </label>
            <label>æ–‡å­—è‰²
              <input type="color" id="directionTextColor" value="#ff0000">
            </label>
          </div>
        </div>
      </div>

      <!-- è¦³æ¸¬åœ°è¨­å®šã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h3 class="section-header" data-section="location">
          <span>è¦³æ¸¬åœ° LOCATION</span>
          <span class="toggle-icon">â–¼</span>
        </h3>
        <div class="section-content" id="location-content">
          <div id="locationSection">
            <!-- CRITICAL: Legacy Input hidden here for chart.js compatibility -->
            <input type="datetime-local" id="datetimeInput" style="display:none !important;">

            <!-- åœ°åæ¤œç´¢ -->
            <label for="placeInput" style="display:none">Place</label>
            <input type="text" id="placeInput" placeholder="Place Search (e.g., Tokyo)">
            <button id="searchPlaceButton">æ¤œç´¢ Search</button>

            <!-- åº§æ¨™å…¥åŠ› -->
            <label for="latitudeInput">
              Latitude
              <input type="number" id="latitudeInput" min="-90" max="90" step="0.0001" value="35.4437">
            </label>

            <label for="longitudeInput">
              Longitude
              <input type="number" id="longitudeInput" min="-180" max="180" step="0.0001" value="139.6380">
            </label>

            <!-- ä¿å­˜ã•ã‚ŒãŸå ´æ‰€ãƒªã‚¹ãƒˆ -->
            <div id="savedLocations">
              <label style="font-size: 0.9em; color: #aaa; margin-bottom:4px; display:block;">Saved Locations:</label>
              <div id="savedLocationsList" style="display: flex; flex-wrap: wrap; gap: 5px;"></div>
            </div>
          </div>
        </div>
      </div>

      <div id="contact">
        <a href="https://forms.gle/gUFJBuh3cxngWHYo6" target="_blank">
          contact
        </a><br>
        astrogrammar.com
      </div>
    </div>
  </div>

  <canvas id="sky"></canvas>
  <canvas id="chartCanvas"></canvas>

  <!-- Right Bottom Dock -->
  <div id="bottomRightDock">
    <button id="toggleTimePanel">D</button>
    <button id="toggleZodiacBtn">S</button>
    <button id="togglePlanetsBtn">â˜¿</button>
  </div>

  <!-- Modern Time Control Panel -->
  <div id="timePanel" class="draggable-panel" style="display:none;">
    <div id="timePanelHeader" class="panel-header">
      <span class="header-title">ğŸ“… Time Control</span>
      <button id="closeTimePanel" class="close-btn" title="Close">Ã—</button>
    </div>
    <div class="panel-content">
      <div class="time-display-row">
        <input type="text" id="modernDateInput" class="time-readout" value="----/--/--">
        <input type="text" id="modernTimeInput" class="time-readout" value="--:--">
      </div>
      <div class="vcr-controls">
        <button id="tpRewindFast" class="vcr-btn">â—€â—€</button>
        <button id="tpRewind" class="vcr-btn">â—€</button>
        <button id="tpPlayPause" class="vcr-btn">â–¶</button>
        <button id="tpForward" class="vcr-btn">â–¶</button>
        <button id="tpForwardFast" class="vcr-btn">â–¶â–¶</button>
        <button id="tpToday" class="vcr-btn small">NOW</button>
      </div>
      <div class="unit-settings-wrapper">
        <button id="toggleUnitSettings" class="icon-btn" title="Change Unit/Speed">
          âš™ï¸ Unit: <span id="currentUnitDisplay">Minute</span>
        </button>
        <div id="unitSelectorPopup" class="unit-popup hidden">
          <div class="unit-option selected" data-unit="minute">Minute</div>
          <div class="unit-option" data-unit="hour">Hour</div>
          <div class="unit-option" data-unit="day">Day</div>
          <div class="unit-option" data-unit="month">Month</div>
          <div class="unit-option" data-unit="year">Year</div>
        </div>
      </div>
    </div>
  </div>

  <script src="./scripts/lib/store.js"></script>
  <script src="./scripts/astronomy.browser.min.js"></script>
  <script src="./scripts/sphere10.js"></script>
  <script src="./scripts/starNames.js"></script>
  <script src="./scripts/lunarOrbit.js"></script>
  <script src="./scripts/chart.js"></script>
  <script src="./scripts/timeControl.js"></script>
  <div></div>
  <footer>astrogrammar.com</footer>
</body>

</html>